Å.........*....*.......*......*.......*.......*.......*.......*.......*.<:start_of_check_key_pressed       LDA	key_press	CMP	#27	BNE	:not_escape	JMP	:exit_program_start:not_escape	CMP	#" "	BNE	:not_spacebar	JSR	SCREENIN	JSR	CHECK_KEYS	JMP	:start_of_check_key_pressed:not_spacebar	LDA	util_store		; Check if in utility mode?	CMP	#0			; If not skip utility check	BEQ	:no_utility_option_chosen	JMP	:utility_check		; Go do Util. selected option.:no_utility_option_chosen	LDA	key_press       CMP	#127       BNE	:not_option_delete       STA	util_store 	JMP	:start_of_check_key_pressed:not_option_delete	CMP	#"4"	BNE	:not_util_menu;	LDA	#&FF;	JSR	CHECK_STAFF;	LDA	userid_flag;	BEQ	:user_id_special_skip	JMP	CHECK_STAFF;:user_id_special_skip;	JSR	CHAIN_UTILITY_MENU;	JMP	PROGRAM_START:not_util_menu       CMP	#"3"        BNE  :not_ren       STA  util_store 	JMP	:start_of_check_key_pressed:not_ren	CMP	#"2"	BNE	:not_transfer		LDX	#>SET_SCREEN	LDY	#<SET_SCREEN	CPY	#&1B	BNE	:rom_version_ok	LDX	#>trans_not_available_text	LDY	#<trans_not_available_text	JSR	PRINT_TEXT	JSR	PRESS_SPACE_BAR	JMP	PROGRAM_START:rom_version_ok	STA	util_store	JMP	:start_of_check_key_pressed:not_transfer       CMP	#135			; Here we check for <COPY> pressed       BNE	:not_cpy_file		; Not then do next key press check       STA	util_store 		; Indicate a utility option.	JMP	:start_of_check_key_pressed:not_cpy_file       CMP	#"1"        BNE	:not_new_file       JSR	PREP_NEW_FILE	JMP	PROGRAM_START:not_new_file       CMP	#"$"        BNE	:not_root	JSR	MOVE_DIR	JMP	PROGRAM_START:not_root       CMP	#"&"        BNE	:not_urd	JSR	MOVE_DIR	JSR	CHECK_FOR_REPORT_MODE	; Check if in Comments/Assessment	JMP	PROGRAM_START:not_urd       CMP	#"%"        BNE	:not_lib	JSR	MOVE_DIR	JMP	PROGRAM_START:not_lib	CMP	#"^^"	BEQ	:go_do_up	       CMP	#139        BNE	:not_up:go_do_up	JSR	GO_BACKUP_DIRECTORY	JSR	CHECK_FOR_REPORT_MODE	; Check if in Comments/Assessment	JMP	PROGRAM_START:not_up       CMP	#"*"        BNE	:not_osc	LDA	#0	STA	chime_bit	; Disable chime       JSR	USER_OSCLI	LDA	#01	STA	chime_bit	; Enable chimer	JMP	PROGRAM_START:not_osc	CMP	#09	BNE	:not_tab	LDA	#0       	; Disable Chimer	STA	chime_bit	JSR	SELECT_DISC	JMP	PROGRAM_START:not_tab	CMP	#"@"	BNE	:not_info	LDA	#0       	; Disable Chimer	STA	chime_bit	JSR	SHOW_ENVIROMENT	LDA	#01	STA	chime_bit	; Enable chimer	JMP	PROGRAM_START:not_info	CMP	#"?"	BEQ	:is_help_mode	CMP	#"/"	BNE	:not_enviro:is_help_mode	JSR	CHECK_HELP_DIRECTORY	CMP	#02	BNE	:exit_help_file_mode	LDA	#"?"	STA	util_store 	JMP	:utility_check:exit_help_file_mode	LDA	#07	JSR	OSWRCH	JMP	PROGRAM_START:not_enviro	JSR	GET_OBJECT_CHOSEN	JSR	OBJECT_TYPE 	CMP	#02	BEQ	:is_directory	JSR	FILE_NAME	; Check if object is a file	JMP	PROGRAM_START:is_directory	LDA	#&FF	JSR	MOVE_DIR       ; Put "DIR" in front of object name	LDY	#10	LDA	#13	STA	object_name,Y	LDY	#0	STY	first_num 	STY	file_num	JSR	UTILITY_OSCLI_COMMAND	; Move into chosen directory 	JSR	CHECK_FOR_REPORT_MODE	; Check if in Comments/Assessment	JMP	PROGRAM_START; Here we are in Utility mode as indicated by util_store.  First ; replace the AUTOLOADER heading with the selected Utility heading.; :utility_check	JSR	UTILITY_HEADER		; Print selected Utility header.	LDA	util_store 		; Get type of utility selected.	CMP	#"/"			; Check for Help utility type "/"	BEQ	:help_mode		; If yes skip next check.	CMP	#"?"			; Check for Help utility type "?"	BNE	:not_help_mode		; If no then skip help utility.:help_mode				; No in help utility mode.	JSR	MAIN_HELP_UTILITY	JMP	PROGRAM_START:not_help_mode	CMP	#127			; Check if delete was selected.	BNE	:not_delete	JSR	DISPLAY_OBJECTS_OPTIONS 	LDA	key_press	CMP	#27	BNE	:do_delete	JSR	RESET_PAGE_OBJECT_NUMBERS	JMP	PROGRAM_START:do_delete	JSR	OPT_WINDOW	JSR	GET_OBJECT_CHOSEN	JSR	OBJECT_TYPE	LDA	#0	JSR	ACCESS_FILE	BCC	:utility_check	LDX	#>confirm_delete_text	LDY	#<confirm_delete_text	JSR	PRINT_TEXT	JSR	INVERSE_COLOUR	LDX	#>name_store	LDY	#<name_store	JSR	PRINT_TEXT	JSR	DEFAULT_COLOUR	LDX	#>confirm_text	LDY	#<confirm_text	JSR	PRINT_TEXT	JSR	OSRDCH	CMP	#"Y"	BEQ	:confirm_del_ok	LDA	attributes	JSR	ACCESS_FILE	JMP	:utility_check:confirm_del_ok	LDX	#>doing_delete_text 	LDY	#<doing_delete_text 	JSR	PRINT_TEXT	LDX	#>name_store	LDY	#<name_store	JSR	PRINT_TEXT	LDX	#>object_name	LDY	#<object_name	STX	cont_blk	STY	cont_blk+1	LDX	#>cont_blk	LDY	#<cont_blk	LDA	#06	JSR	UTILITY_OSFILE_COMMAND	JMP	:utility_check:not_delete             		; Was Transfer Utility chosen?	CMP	#"2"	BNE	:not_transfer_utility:redue_transfer_menu	LDY	#0	STY	first_num 	STY	file_num	JSR	MEDIA_TRANSFER_MENU	LDA	key_press	CMP	#27	BNE	:do_transfer	JMP	PROGRAM_START:do_transfer	JSR	TRANSFER_DATA_ROUTINE	LDA	key_press	CMP	#27	BNE	:redue_transfer_menu	JMP	PROGRAM_START:not_transfer_utility	CMP	#135			; Just Check is <COPY> pressed?	BNE	:not_copy_file		; If not then exit.	JSR	DISPLAY_OBJECTS_OPTIONS 	LDA	key_press 	CMP	#27	BNE	:do_copy	JMP	PROGRAM_START:do_copy	JSR	GET_OBJECT_CHOSEN	JSR	OBJECT_TYPE 	JSR	COPY_FILE       	JMP	PROGRAM_START:not_copy_file				; Was Rename Utility chosen?	CMP	#"3" 	BNE	:not_rename_mode	JSR	DISPLAY_OBJECTS_OPTIONS 	LDA	key_press	CMP	#27	BNE	:do_rename:not_rename_mode	JMP	PROGRAM_START:do_rename	JSR	OPT_WINDOW 	JSR	GET_OBJECT_CHOSEN	JSR	OBJECT_TYPE 	LDA	#0	JSR	ACCESS_FILE	BCS	:no_access_violation	JMP	:utility_check:no_access_violation	LDY	#0			; Wipe invalid chars with spaces:rename_padder_loop	LDA	object_name,Y	CMP	#32	BPL 	:not_ren_return	LDA	#32	STA	object_name,Y:not_ren_return	CMP	#127	BMI	:not_term_code	LDA	#32	STA	object_name,Y:not_term_code	INY	CPY	#11	BNE	:rename_padder_loop        LDX	#>new_filename_header_text        LDY	#<new_filename_header_text        JSR     PRINT_TEXT        LDA	#20        LDX	#>param_blk        LDY	#<param_blk        INX        JSR     GET_NAME         CPY	#0        BNE	:continue_rename	JMP	:not_copy_file:continue_rename	STY	Temp	LDA	curr_file_syst	CMP	#04	BNE	:not_dfs_rename	LDY	#07	STY	Temp:not_dfs_rename	LDY	Temp        INY        LDA	#&FF        STA     param_blk,Y	STY	Temp        LDA	#"R"         STA     util_com         LDA	#"E"         STA     util_com+1         LDA	#"N"        STA     util_com+2         LDA	#"."         STA     util_com+3	LDX	#>confirm_rename_text	LDY	#<confirm_rename_text	JSR	PRINT_TEXT	JSR	INVERSE_COLOUR	LDX	#>name_store	LDY	#<name_store	JSR	PRINT_TEXT	JSR	DEFAULT_COLOUR	LDX	#>confirm_rename_text_addenda	LDY	#<confirm_rename_text_addenda	JSR	PRINT_TEXT	JSR	INVERSE_COLOUR        LDX	#>param_blk        LDY	#<param_blk        INX	JSR	PRINT_TEXT	JSR	DEFAULT_COLOUR        LDX	#>confirm_text	LDY	#<confirm_text	JSR	PRINT_TEXT	JSR	OSRDCH	CMP	#"Y"		BEQ	:confirm_rename_ok	JMP	:utility_check:confirm_rename_ok	LDX	#>doing_rename_text        LDY	#<doing_rename_text        JSR     PRINT_TEXT	LDY	Temp	LDA	#13	STA	param_blk,Y        JSR     UTILITY_OSCLI_COMMAND        LDX	#>param_blk        LDY	#<param_blk	INX	STX	Temp	STY	Temp+1	LDY	#0:down_load_loop	LDA	(Temp),Y	STA	object_name,Y	INY	CMP	#13	BNE	:down_load_loop	LDA	attributes	JSR	ACCESS_FILE	JMP	:utility_check; For a non Hinwick version of Autoloader you must REM out the ; following lines:-;	;	STY	mary_flag;	JSR	CHECK_MARY_ONLY;	STA	mary_flag;	JSR	CHECK_FOR_REPORT_MODE;	JSR	CHECK_FOR_REPORT_MODE;	JSR	CHECK_FOR_REPORT_MODE;	LDA	mary_flag;	JSR	MARY_OPTION;