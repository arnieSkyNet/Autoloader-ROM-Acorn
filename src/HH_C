CHECK_FOR_REPORT_MODE	LDA	#0	STA	comm_ass_flag	LDA	#"G"			; Set up so CSD read won't print	STA	util_store	JSR	READ_CSD_NAME		; Read directory name	LDY	file_num+1		; Get pointer of CSD name data	JSR	ATTACH_RET_CHAR	JSR	MATCH_STRINGS	STA	comm_ass_flag	RTSMATCH_STRINGS	LDX	#>directory_names	LDY	#<directory_names	JSR	AND_FE_OSCLI	BCS	:dir_file_loaded	JMP	:no_match_or_file:dir_file_loaded	LDY	file_num+1		; Get pointer of CSD name data	JSR	WORD_MATCH	LDA	func_pointer	BEQ	:no_match_or_file:term_parm_found			; A definite match has been found	CMP	#08			; Comments Length been reached	BEQ	:exit_match_loop	CMP	#19			; Assessment length been reached	BEQ	:exit_match_loop	CMP	#27			; Pending Length been reached	BEQ	:exit_match_loop:no_match_or_file	LDA	#0:exit_match_loop	STA	func_pointer		; If A = 0 then no match A <> 0 Yes	RTSMARY_OPTION	JSR	OPT_WINDOW	LDX	#>copy_header_text	LDY	#<copy_header_text	JSR	PRINT_TEXT	JSR	YES_NO_ESCAPE	CMP	#"Y"	BEQ	:do_mary_copy	LDA	#01	RTS:do_mary_copy	JSR	RESTORE	JSR	CHIME_OFF_CODE	LDX	#>mary_copy_utils	LDY	#<mary_copy_utils	JSR	OSCLI	LDA	#138	LDX	#0	LDY	#136	JSR	OSBYTE	JMP	:enter_basic;DOWN_OSCLI;	JSR	MOVE_DOWN_MEMORY;	JSR	OSCLI			; Move down into dir.;	RTSCHECK_STAFF	PHA	JSR	GET_USER_ID	LDY	#0	JSR	ATTACH_RET_CHAR	JMP	:staff_menu	LDX	#>user_ID_names	LDY	#<user_ID_names	JSR	AND_FE_OSCLI	BCC	:not_staff:ids_load_ok	LDY	#0	JSR	WORD_MATCH	LDA	func_pointer	BNE	:member_staff:not_staff	PLA	LDA	#0			; Not a valid user	STA	userid_flag	RTS:member_staff	LDA	#01			; Is user from special list	STA	userid_flag	LDA	func_pointer	CMP	#08	BNE	:not_special_mary	LDA	#&FF	STA	userid_flag		; Indicates Super Special user:not_special_mary	PLA	CMP	#&FF	BNE	:skip_exit_staff_menu		RTS:skip_exit_staff_menu	LDA	userid_flag	BEQ	:staff_menu	LDX	#>mary_util_data	LDY	#<mary_util_data	JMP	:chain_util_menu:staff_menu	LDX	#>staff_util_data	LDY	#<staff_util_data:chain_util_menu	JSR	OSCLI	JSR	MODE131	LDA	#138	LDX	#0	LDY	#136	JSR	OSBYTE	LDA	#21	JSR	OSWRCH	JMP	:enter_basicEXIT_TO_MCMENU	JSR	CHECK_FOR_MENUDATA	CMP	#01	BNE	:exit_from_menudata	LDX	#>mcmenu_data	LDY	#<mcmenu_data	JMP	OSCLI	BRK	BRK	BRK:exit_from_menudata	RTSAPPEND_NEW_REPORT	LDY	#05	JSR	INSERT_N_RETURNS       LDX	#>view_reports_read_data       LDY	#<view_reports_read_data	JSR	INSERT_FUNC_BUFFER       LDX	#>view_name_data       LDY	#<view_name_data	JSR	INSERT_FUNC_BUFFER	LDA	#&FF	STA	object_name+11	LDX	#>object_name	LDY	#<object_name	JSR	INSERT_FUNC_BUFFER       JMP     ENTER_VIEW	BRK	BRK	BRKENTER_MARYS_HH_MENU	LDX	#>marys_exit_data	LDY	#<marys_exit_data	JSR	OSCLI	LDA	#138	LDX	#0	LDY	#128	JSR	OSBYTE	RTSWORD_MATCH	STY	isdata_flag		; Beginning of read data	LDX	#0			; Start of data table	STX	func_pointer		; Flag for indicate a String Match:match_string_loop	LDA	param_blk,Y		; Get read data byte,pointer	STA	general_store		; Save to compare later	CMP	#&0D			; End of read data/ Match found	BEQ	:exit_word_match_loop	LDA	mary_userID,X		; Get from data byte to check	CMP	#"#"	BNE	:not_exit_ref_data	LDA	#0	STA	func_pointer		; Indicate no String Match	JMP	:exit_word_match_loop:not_exit_ref_data	CMP	general_store		; Is A = Read data (A is Ref data)	BEQ	:data_match_found	LDY	isdata_flag		; Get pointer of CSD name data	INX	INC	func_pointer	JMP	:match_string_loop:data_match_found	INY				; Increment read data pointer.	INX				; Increment ref data pointer.	INC	func_pointer		; Indicate match so far good	JMP	:match_string_loop:exit_word_match_loop	RTSATTACH_RET_CHAR	LDA	param_blk,Y	CMP	#127	BMI	:check_less_space:store_term_string	LDA	#&0D	STA	param_blk,Y	JMP	:exit_term_loop:check_less_space	CMP	#33	BMI	:store_term_string	INY	JMP	ATTACH_RET_CHAR:exit_term_loop	RTSAND_FE_OSCLI	STX     oscli_store 	STY     oscli_store+1 	LDA	#&FE	JSR     ERROR_OSCLI	RTS